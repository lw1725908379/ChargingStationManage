/* empty css                *//* empty css                *//* empty css                        *//* empty css                 *//* empty css               */import{_ as F}from"./index.c98eeb74.js";import{_ as q,B as M,D as A,r as i,b as k,j as f,H,k as s,E as $,c as G,e as K,d as Q,a8 as W,a9 as X,af as Y,ag as Z,ah as ee,a6 as te,ae as oe,o as w,f as ae,i as e,w as a,l as u,q as E,h as re,a0 as le,g as ne,v as se}from"./index.9456bf99.js";const ie={style:{padding:"6px 6px 0 6px"}},pe=["textContent"],ce={__name:"list",setup(de){M().on("refresh",()=>{b()}),A(()=>{b()});const x=i(),_=i(),v=i(),p=i(""),S=i(""),C=i("50%"),l=k({current:1,pageSize:10,total:0}),b=async()=>{const o=await f("/user/check_login",{token:H()});o.code===0?(t.loginUser=o.data,c()):(s.error(o.msg),router.push("/login"))},z=()=>{x.value.resetFields()},t=k({searchParams:{name:""},loginUser:{id:"",roleId:1},operatorForm:{id:"",name:"",description:""},multipleSelection:[],operatorList:[]}),V=()=>{p.value="\u6DFB\u52A0\u8FD0\u8425\u5546\u4FE1\u606F",t.operatorForm={id:"",name:"",description:""},_.value.openDialog()},P=()=>{if(t.multipleSelection.length!==1){s.warning("\u8BF7\u9009\u62E9\u4E00\u6761\u6570\u636E\u8FDB\u884C\u7F16\u8F91\uFF01");return}p.value="\u7F16\u8F91\u8FD0\u8425\u5546\u4FE1\u606F",t.operatorForm=JSON.parse(JSON.stringify(t.multipleSelection[0])),_.value.openDialog()},R=()=>{if(t.multipleSelection.length!==1){s.warning("\u8BF7\u9009\u62E9\u4E00\u6761\u6570\u636E\u8FDB\u884C\u5220\u9664\uFF01");return}S.value="\u786E\u5B9A\u8981\u5220\u9664\u6B64\u6570\u636E\u5417\uFF1F",p.value="\u786E\u8BA4\u63D0\u793A",C.value="30%",t.operatorForm=JSON.parse(JSON.stringify(t.multipleSelection[0])),v.value.openDialog()},N=async()=>{const o=await f("/operator/delete",t.operatorForm);o.code===0?(s.success(o.msg),v.value.closeDialog(),c()):s.error(o.msg)},O=async()=>{const o=await f("/operator/save",t.operatorForm);o.code===0?(s.success(o.msg),_.value.closeDialog(),c()):s.error(o.msg)},U=(o,r)=>{l.current=o,l.pageSize=r,c()},B=o=>{t.multipleSelection=o},c=async()=>{const o=await f("/operator/list",{page:l.current,size:l.pageSize,param:{name:t.searchParams.name}});o.code===0?(t.operatorList=o.data.list,l.total=o.data.total):s.error(o.msg)};return(o,r)=>{const h=$,g=G,d=K,D=Q,y=W,L=X,m=Y,I=Z,J=ee,j=te,T=oe("adaptive");return w(),ae("div",ie,[e(j,{class:"card-list",shadow:"never"},{default:a(()=>[e(D,{ref_key:"searchFormRef",ref:x,inline:!0,model:t.searchParams},{default:a(()=>[e(g,{label:"\u8FD0\u8425\u5546\u540D\u79F0",prop:"name"},{default:a(()=>[e(h,{modelValue:t.searchParams.name,"onUpdate:modelValue":r[0]||(r[0]=n=>t.searchParams.name=n),placeholder:"\u8BF7\u8F93\u5165\u8FD0\u8425\u5546\u540D\u79F0",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(g,null,{default:a(()=>[e(d,{type:"primary",icon:"search",plain:"",onClick:c},{default:a(()=>[u("\u641C\u7D22")]),_:1}),e(d,{type:"danger",icon:"refresh",plain:"",onClick:z},{default:a(()=>[u("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),t.loginUser.roleId===2?(w(),E(L,{key:0,gutter:10},{default:a(()=>[e(y,{span:1.5},{default:a(()=>[e(d,{type:"primary",icon:"plus",plain:"",onClick:V},{default:a(()=>[u("\u65B0\u589E")]),_:1})]),_:1}),e(y,{span:1.5},{default:a(()=>[e(d,{type:"success",icon:"edit",plain:"",onClick:P},{default:a(()=>[u("\u4FEE\u6539")]),_:1})]),_:1}),e(y,{span:1.5},{default:a(()=>[e(d,{type:"danger",icon:"delete",plain:"",onClick:R},{default:a(()=>[u("\u5220\u9664")]),_:1})]),_:1})]),_:1})):re("",!0),le((w(),E(I,{border:"",onSelectionChange:B,data:t.operatorList,"empty-text":"\u6682\u65F6\u6CA1\u67E5\u5230\u6570\u636E\u54DF"},{default:a(()=>[e(m,{type:"selection",width:"55"}),e(m,{label:"\u5E8F\u53F7",prop:"id",width:"140px"}),e(m,{label:"\u8FD0\u8425\u5546\u540D\u79F0",prop:"name",width:"300px"}),e(m,{label:"\u4E0B\u5C5E\u7535\u7AD9\u6570\u91CF",prop:"stationNum",width:"200px"}),e(m,{label:"\u8FD0\u8425\u5546\u63CF\u8FF0",prop:"description","show-overflow-tooltip":!0})]),_:1},8,["data"])),[[T]]),e(J,{background:"","current-page":l.current,"onUpdate:currentPage":r[1]||(r[1]=n=>l.current=n),"page-size":l.pageSize,"onUpdate:pageSize":r[2]||(r[2]=n=>l.pageSize=n),"page-sizes":[10,20,50,100,200],layout:"total, sizes, prev, pager, next, jumper",total:l.total,onChange:U},null,8,["current-page","page-size","total"])]),_:1}),e(F,{ref_key:"operatorDialogRef",ref:_,title:p.value,onOnConfirm:O},{content:a(()=>[e(D,{model:t.operatorForm,"label-width":"100px"},{default:a(()=>[e(g,{label:"\u8FD0\u8425\u5546\u540D\u79F0"},{default:a(()=>[e(h,{modelValue:t.operatorForm.name,"onUpdate:modelValue":r[3]||(r[3]=n=>t.operatorForm.name=n),placeholder:"\u8BF7\u8F93\u5165\u8FD0\u8425\u5546\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(g,{label:"\u8FD0\u8425\u5546\u63CF\u8FF0"},{default:a(()=>[e(h,{modelValue:t.operatorForm.description,"onUpdate:modelValue":r[4]||(r[4]=n=>t.operatorForm.description=n),autosize:{minRows:3},type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u8FD0\u8425\u5546\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"]),e(F,{ref_key:"confirmDialogRef",ref:v,width:C.value,title:p.value,onOnConfirm:N},{content:a(()=>[ne("div",{style:{display:"flex","justify-content":"center","font-size":"16px"},textContent:se(S.value)},null,8,pe)]),_:1},8,["width","title"])])}}};var we=q(ce,[["__scopeId","data-v-4b24ea75"]]);export{we as default};
